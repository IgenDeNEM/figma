local waterElements = {}
local waterTable = {}
local waterLevel = 0
local canyonLevel = 40
local waveLevel = 0.15
addEventHandler("onClientResourceStart", getResourceRootElement(), function()
  waterTable = {
    {
      2870,
      -3000,
      waterLevel,
      3000,
      -3000,
      waterLevel,
      2870,
      -2100,
      waterLevel,
      3000,
      -2100,
      waterLevel
    },
    {
      2870,
      -2100,
      waterLevel,
      3000,
      -2100,
      waterLevel,
      2870,
      2800,
      waterLevel,
      3000,
      2800,
      waterLevel
    },
    {
      -3000,
      -3000,
      waterLevel,
      -1300,
      -3000,
      waterLevel,
      -3000,
      -2700,
      waterLevel,
      -1300,
      -2700,
      waterLevel
    },
    {
      -1300,
      -3000,
      waterLevel,
      -1100,
      -3000,
      waterLevel,
      -1300,
      -2700,
      waterLevel,
      -1100,
      -2700,
      waterLevel
    },
    {
      -1100,
      -3000,
      waterLevel,
      -250,
      -3000,
      waterLevel,
      -1100,
      -2700,
      waterLevel,
      -250,
      -2700,
      waterLevel
    },
    {
      -250,
      -3000,
      waterLevel,
      1030,
      -3000,
      waterLevel,
      -250,
      -2700,
      waterLevel,
      1030,
      -2700,
      waterLevel
    },
    {
      -250,
      -2700,
      waterLevel,
      1030,
      -2700,
      waterLevel,
      -250,
      -1850,
      waterLevel,
      1030,
      -1850,
      waterLevel
    },
    {
      -250,
      -1850,
      waterLevel,
      150,
      -1850,
      waterLevel,
      -250,
      -1600,
      waterLevel,
      150,
      -1600,
      waterLevel
    },
    {
      -35,
      -1600,
      waterLevel,
      100,
      -1600,
      waterLevel,
      -35,
      -1540,
      waterLevel,
      100,
      -1540,
      waterLevel
    },
    {
      30,
      -1540,
      waterLevel,
      100,
      -1540,
      waterLevel,
      30,
      -870,
      waterLevel,
      100,
      -870,
      waterLevel
    },
    {
      100,
      -970,
      waterLevel,
      140,
      -970,
      waterLevel,
      100,
      -870,
      waterLevel,
      140,
      -870,
      waterLevel
    },
    {
      -10,
      -1460,
      waterLevel,
      30,
      -1460,
      waterLevel,
      -10,
      -1225,
      waterLevel,
      30,
      -1225,
      waterLevel
    },
    {
      0,
      -1140,
      waterLevel,
      30,
      -1140,
      waterLevel,
      0,
      -1065,
      waterLevel,
      30,
      -1065,
      waterLevel
    },
    {
      100,
      -1220,
      waterLevel,
      150,
      -1220,
      waterLevel,
      100,
      -1110,
      waterLevel,
      150,
      -1110,
      waterLevel
    },
    {
      -460,
      -1950,
      waterLevel,
      -250,
      -1950,
      waterLevel,
      -460,
      -1815,
      waterLevel,
      -250,
      -1815,
      waterLevel
    },
    {
      700,
      -1850,
      waterLevel,
      750,
      -1850,
      waterLevel,
      700,
      -1470,
      waterLevel,
      750,
      -1470,
      waterLevel
    },
    {
      -160,
      -945,
      waterLevel,
      30,
      -945,
      waterLevel,
      -160,
      -870,
      waterLevel,
      30,
      -870,
      waterLevel
    },
    {
      -400,
      -870,
      waterLevel,
      -80,
      -870,
      waterLevel,
      -400,
      -500,
      waterLevel,
      -80,
      -500,
      waterLevel
    },
    {
      -370,
      -500,
      waterLevel,
      -112,
      -500,
      waterLevel,
      -370,
      -450,
      waterLevel,
      -112,
      -450,
      waterLevel
    },
    {
      -370,
      -450,
      waterLevel,
      -140,
      -450,
      waterLevel,
      -370,
      -400,
      waterLevel,
      -140,
      -400,
      waterLevel
    },
    {
      -370,
      -400,
      waterLevel,
      -200,
      -400,
      waterLevel,
      -370,
      -350,
      waterLevel,
      -200,
      -350,
      waterLevel
    },
    {
      -370,
      -350,
      waterLevel,
      -250,
      -350,
      waterLevel,
      -370,
      -300,
      waterLevel,
      -250,
      -300,
      waterLevel
    },
    {
      -370,
      -300,
      waterLevel,
      -350,
      -300,
      waterLevel,
      -370,
      -280,
      waterLevel,
      -350,
      -280,
      waterLevel
    },
    {
      -900,
      -400,
      waterLevel,
      -370,
      -400,
      waterLevel,
      -900,
      -250,
      waterLevel,
      -370,
      -250,
      waterLevel
    },
    {
      -1800,
      -500,
      waterLevel,
      -900,
      -500,
      waterLevel,
      -1800,
      -270,
      waterLevel,
      -900,
      -270,
      waterLevel
    },
    {
      -1800,
      -870,
      waterLevel,
      -1120,
      -870,
      waterLevel,
      -1800,
      -270,
      waterLevel,
      -1120,
      -270,
      waterLevel
    },
    {
      -1800,
      -270,
      waterLevel,
      -900,
      -270,
      waterLevel,
      -1800,
      280,
      waterLevel,
      -900,
      280,
      waterLevel
    },
    {
      -1500,
      280,
      waterLevel,
      -900,
      280,
      waterLevel,
      -1500,
      450,
      waterLevel,
      -900,
      450,
      waterLevel
    },
    {
      -900,
      50,
      waterLevel,
      -750,
      50,
      waterLevel,
      -900,
      450,
      waterLevel,
      -750,
      450,
      waterLevel
    },
    {
      1030,
      -3000,
      waterLevel,
      1350,
      -3000,
      waterLevel,
      1030,
      -2700,
      waterLevel,
      1350,
      -2700,
      waterLevel
    },
    {
      1030,
      -2700,
      waterLevel,
      1350,
      -2700,
      waterLevel,
      1030,
      -2340,
      waterLevel,
      1350,
      -2340,
      waterLevel
    },
    {
      1350,
      -3000,
      waterLevel,
      2250,
      -3000,
      waterLevel,
      1350,
      -2700,
      waterLevel,
      2250,
      -2700,
      waterLevel
    },
    {
      2250,
      -3000,
      waterLevel,
      2870,
      -3000,
      waterLevel,
      2250,
      -2100,
      waterLevel,
      2870,
      -2100,
      waterLevel
    },
    {
      -3000,
      -2700,
      waterLevel,
      -2850,
      -2700,
      waterLevel,
      -3000,
      -2000,
      waterLevel,
      -2850,
      -2000,
      waterLevel
    },
    {
      -2850,
      -2700,
      waterLevel,
      -2600,
      -2700,
      waterLevel,
      -2850,
      -2000,
      waterLevel,
      -2600,
      -2000,
      waterLevel
    },
    {
      -3000,
      -2000,
      waterLevel,
      -2850,
      -2000,
      waterLevel,
      -3000,
      -900,
      waterLevel,
      -2850,
      -900,
      waterLevel
    },
    {
      -3000,
      -900,
      waterLevel,
      -2850,
      -900,
      waterLevel,
      -3000,
      1250,
      waterLevel,
      -2850,
      1250,
      waterLevel
    },
    {
      -3000,
      1250,
      waterLevel,
      -2850,
      1250,
      waterLevel,
      -3000,
      2250,
      waterLevel,
      -2850,
      2250,
      waterLevel
    },
    {
      -3000,
      2250,
      waterLevel,
      -2850,
      2250,
      waterLevel,
      -3000,
      3000,
      waterLevel,
      -2850,
      3000,
      waterLevel
    },
    {
      -1300,
      -2700,
      waterLevel,
      -1100,
      -2700,
      waterLevel,
      -1300,
      -1730,
      waterLevel,
      -1100,
      -1730,
      waterLevel
    },
    {
      -1560,
      -2350,
      waterLevel,
      -1300,
      -2350,
      waterLevel,
      -1560,
      -1730,
      waterLevel,
      -1300,
      -1730,
      waterLevel
    },
    {
      -1750,
      -1730,
      waterLevel,
      -1300,
      -1730,
      waterLevel,
      -1750,
      -1500,
      waterLevel,
      -1300,
      -1500,
      waterLevel
    },
    {
      -1950,
      -1590,
      waterLevel,
      -1750,
      -1590,
      waterLevel,
      -1950,
      -1300,
      waterLevel,
      -1750,
      -1300,
      waterLevel
    },
    {
      -2100,
      -1450,
      waterLevel,
      -1950,
      -1450,
      waterLevel,
      -2100,
      -1130,
      waterLevel,
      -1950,
      -1130,
      waterLevel
    },
    {
      -2850,
      -1260,
      waterLevel,
      -2100,
      -1260,
      waterLevel,
      -2850,
      -800,
      waterLevel,
      -2100,
      -800,
      waterLevel
    },
    {
      -2850,
      1250,
      waterLevel,
      -1100,
      1250,
      waterLevel,
      -2850,
      2250,
      waterLevel,
      -1100,
      2250,
      waterLevel
    },
    {
      -2550,
      2250,
      waterLevel,
      -2000,
      2250,
      waterLevel,
      -2550,
      2600,
      waterLevel,
      -2000,
      2600,
      waterLevel
    },
    {
      -1590,
      1200,
      waterLevel,
      -1100,
      1200,
      waterLevel,
      -1590,
      1250,
      waterLevel,
      -1100,
      1250,
      waterLevel
    },
    {
      -1530,
      450,
      waterLevel,
      -1100,
      450,
      waterLevel,
      -1530,
      1200,
      waterLevel,
      -1100,
      1200,
      waterLevel
    },
    {
      -1100,
      450,
      waterLevel,
      -750,
      450,
      waterLevel,
      -1100,
      1200,
      waterLevel,
      -750,
      1200,
      waterLevel
    },
    {
      -2850,
      2800,
      waterLevel,
      2870,
      2800,
      waterLevel,
      -2850,
      3000,
      waterLevel,
      2870,
      3000,
      waterLevel
    },
    {
      2870,
      2800,
      waterLevel,
      3000,
      2800,
      waterLevel,
      2870,
      3000,
      waterLevel,
      3000,
      3000,
      waterLevel
    },
    {
      -750,
      500,
      waterLevel,
      2870,
      500,
      waterLevel,
      -750,
      2800,
      waterLevel,
      2870,
      2800,
      waterLevel
    },
    {
      -1000,
      1200,
      waterLevel,
      -750,
      1200,
      waterLevel,
      -1000,
      1775,
      waterLevel,
      -750,
      1775,
      waterLevel
    },
    {
      -1100,
      1775,
      waterLevel,
      -750,
      1775,
      waterLevel,
      -1100,
      2800,
      waterLevel,
      -750,
      2800,
      waterLevel
    },
    {
      -1250,
      2550,
      waterLevel,
      -1100,
      2550,
      waterLevel,
      -1250,
      2800,
      waterLevel,
      -1100,
      2800,
      waterLevel
    },
    {
      2700,
      150,
      waterLevel,
      2870,
      150,
      waterLevel,
      2700,
      500,
      waterLevel,
      2870,
      500,
      waterLevel
    },
    {
      1460,
      335,
      waterLevel,
      2700,
      335,
      waterLevel,
      1460,
      500,
      waterLevel,
      2700,
      500,
      waterLevel
    },
    {
      -750,
      240,
      waterLevel,
      950,
      240,
      waterLevel,
      -750,
      500,
      waterLevel,
      950,
      500,
      waterLevel
    },
    {
      -100,
      140,
      waterLevel,
      415,
      140,
      waterLevel,
      -100,
      240,
      waterLevel,
      415,
      240,
      waterLevel
    },
    {
      -1398.272,
      2086.3774,
      40.8492,
      -1136.8396,
      2086.3774,
      40.8492,
      -1398.272,
      2172.1045,
      40.8492,
      -1136.8396,
      2172.1045,
      40.8492
    },
    {
      1860,
      -285,
      waterLevel,
      2280,
      -285,
      waterLevel,
      1860,
      335,
      waterLevel,
      2280,
      335,
      waterLevel
    },
    {
      1550,
      -100,
      waterLevel,
      1860,
      -100,
      waterLevel,
      1550,
      0,
      waterLevel,
      1860,
      0,
      waterLevel
    },
    {
      1550,
      -260,
      waterLevel,
      1640,
      -260,
      waterLevel,
      1550,
      0,
      waterLevel,
      1640,
      0,
      waterLevel
    },
    {
      1250,
      -320,
      waterLevel,
      1550,
      -320,
      waterLevel,
      1250,
      -150,
      waterLevel,
      1550,
      -150,
      waterLevel
    },
    {
      500,
      -320,
      waterLevel,
      1250,
      -320,
      waterLevel,
      500,
      -50,
      waterLevel,
      1250,
      -50,
      waterLevel
    },
    {
      335,
      -350,
      waterLevel,
      500,
      -350,
      waterLevel,
      335,
      -230,
      waterLevel,
      500,
      -230,
      waterLevel
    },
    {
      300,
      -380,
      waterLevel,
      335,
      -380,
      waterLevel,
      300,
      -300,
      waterLevel,
      335,
      -300,
      waterLevel
    },
    {
      250,
      -420,
      waterLevel,
      300,
      -420,
      waterLevel,
      250,
      -325,
      waterLevel,
      300,
      -325,
      waterLevel
    },
    {
      30,
      -500,
      waterLevel,
      250,
      -500,
      waterLevel,
      30,
      -375,
      waterLevel,
      250,
      -375,
      waterLevel
    },
    {
      -80,
      -700,
      waterLevel,
      100,
      -700,
      waterLevel,
      -80,
      -500,
      waterLevel,
      100,
      -500,
      waterLevel
    },
    {
      1190,
      -2400,
      9.5,
      1209,
      -2400,
      9.5,
      1190,
      -2340,
      9.5,
      1209,
      -2340,
      9.5
    },
    {
      1209,
      -2412,
      9.5,
      1229,
      -2412,
      9.5,
      1209,
      -2340,
      9.5,
      1229,
      -2340,
      9.5
    },
    {
      1229,
      -2418,
      9.5,
      1260,
      -2418,
      9.5,
      1229,
      -2340,
      9.5,
      1260,
      -2340,
      9.5
    },
    {
      1260,
      -2410,
      9.5,
      1280,
      -2410,
      9.5,
      1260,
      -2340,
      9.5,
      1280,
      -2340,
      9.5
    },
    { --ez maganbirtok medence viz
      1325,
      77.2685,
      28,
      1330,
      77.2685,
      28,
      1325,
      94,
      28,
      1330,
      94,
      28
    },
    { --ez maganbirtok medence viz
      1320.9547,
      77.2685,
      28,
      1325,
      77.2685,
      28,
      1320.9547,
      96,
      28,
      1325,
      96,
      28
    },
    { --ez maganbirtok medence viz
      1312.2047,
      80.125,
      28,
      1320.9547,
      80.125,
      28,
      1312.2047,
      98,
      28,
      1320.9547,
      98,
      28
    },
    {
      1363,
      -760,
      88.5,
      1385,
      -760,
      88.5,
      1363,
      -747,
      88.5,
      1385,
      -747,
      88.5
    },
    {
      1270,
      -810,
      87,
      1288,
      -810,
      87,
      1270,
      -800,
      87,
      1288,
      -800,
      87
    },
    {
      1086,
      -684,
      112,
      1104,
      -684,
      112,
      1086,
      -662,
      112,
      1104,
      -662,
      112
    },
    {
      995,
      -1022,
      41.2,
      1006,
      -1022,
      41.2,
      995,
      -1002,
      41.2,
      1006,
      -1002,
      41.2
    },
    {
      1930,
      -1210,
      18.7,
      2012,
      -1210,
      18.7,
      1930,
      -1178,
      18.7,
      2012,
      -1178,
      18.7
    },
    {
      1935,
      -1220,
      18.7,
      2012,
      -1220,
      18.7,
      1935,
      -1210,
      18.7,
      2012,
      -1210,
      18.7
    },
    {
      2294,
      -1432,
      22,
      2328,
      -1432,
      22,
      2294,
      -1396,
      22,
      2328,
      -1396,
      22
    },
    {
      -2646,
      842,
      62.7,
      -2640,
      842,
      62.7,
      -2646,
      854,
      62.7,
      -2640,
      854,
      62.7
    },
    {
      -2679,
      929,
      78.3,
      -2666,
      929,
      78.3,
      -2679,
      942,
      78.3,
      -2666,
      942,
      78.3
    },
    {
      -2699,
      915,
      66.3,
      -2690,
      915,
      66.3,
      -2699,
      934,
      66.3,
      -2690,
      934,
      66.3
    },
    {
      -2646,
      952,
      70.7,
      -2632,
      952,
      70.7,
      -2646,
      960,
      70.7,
      -2632,
      960,
      70.7
    },
    {
      -2521,
      -300,
      37,
      -2384,
      -300,
      37,
      -2521,
      -240,
      37,
      -2384,
      -240,
      37
    },
    {
      -2755,
      -520,
      5,
      -2690,
      -520,
      5,
      -2755,
      -420,
      5,
      -2690,
      -420,
      5
    },
    {
      -825,
      -2063,
      5.1,
      -463,
      -2063,
      5.1,
      -825,
      -1850,
      5.1,
      -463,
      -1850,
      5.1
    },
    {
      -1233.3,
      -315.71,
      14.5841,
      -1156.52,
      -315.71,
      14.5841,
      -1233.3,
      -233.03,
      14.5841,
      -1156.52,
      -233.03,
      14.5841
    }
  }
  setWaterLevel(-6000, true, true, true, false)
  setWaveHeight(waveLevel)
  setWaterColor(45, 105, 115, 229.5)
  if getElementData(localPlayer, "loggedIn") then
    createSeeWater(1)
  end
end)
addEvent("extraLoadStart:loadingWaters", false)
addEventHandler("extraLoadStart:loadingWaters", getRootElement(), function()
  createSeeWater(1)
end)
function createSeeWater(i)
  if isElement(waterElements[i]) then
    destroyElement(waterElements[i])
  end
  waterElements[i] = nil
  local water = createWater(waterTable[i][1], waterTable[i][2], waterTable[i][3], waterTable[i][4], waterTable[i][5], waterTable[i][6], waterTable[i][7], waterTable[i][8], waterTable[i][9], waterTable[i][10], waterTable[i][11], waterTable[i][12])
  waterElements[i] = water
  triggerEvent("extraLoaderProgress", localPlayer, "loadingWaters", i / #waterTable, "Vizek betöltése (" .. i .. "/" .. #waterTable .. ")")
  i = i + 1
  if i <= #waterTable then
    setTimer(createSeeWater, 25, 1, i)
  else
    triggerEvent("extraLoaderDone", localPlayer, "loadingWaters")
  end
end
addEventHandler("onClientResourceStop", getResourceRootElement(), function()
  for k = 1, #waterElements do
    if isElement(waterElements[k]) then
      destroyElement(waterElements[k])
    end
    waterElements[k] = nil
  end
end)
function setWaterDimension(dim)
  for k = 1, #waterElements do
    setElementDimension(waterElements[k], dim)
  end
end
brownWaterZone = createColSphere(-660, -1950, 10, 220)
function enterBrownWaterZone(theElement, matchingDimension)
  if theElement == localPlayer then
    setWaveHeight(0)
  end
end
addEventHandler("onClientColShapeHit", brownWaterZone, enterBrownWaterZone)
function enterBrownWaterZone(theElement, matchingDimension)
  if theElement == localPlayer then
    setWaveHeight(waveLevel)
  end
end
addEventHandler("onClientColShapeLeave", brownWaterZone, enterBrownWaterZone)
